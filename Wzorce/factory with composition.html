<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous" defer></script>
</head>
<body>
    <script>
        var person = function(name, age){
            let state = {
                name: name,
                age: age,
                words: 'hello'
            };

            return Object.assign(
                state, // target
                speaker(state), // doda do state
                walker(state) // doda kolejny
            ); 
        }

        var speaker = function(state){
            let words = state.words || 'hello';
            const sing = function(){
                console.log(state.name + ' spiewa.');
            }
            return {
                speak: function(){
                    console.log(state.name + ' m√≥wi ' + words);
                },

                sing: sing
            }
        };

        var walker = function(state){
            return {
                walk: function(){
                    console.log(state.name + ' chodzi.');
                },

                run: function(fastFlag){
                    let txt = (fastFlag ? ' szybko ' : ' ') + ' biegnie';
                    console.log(state.name + txt);
                }
            }
        }

        let p = person('Jan', 15);
        p.speak();
        p.walk();
        p.run(true);
        p.sing();
    </script>
</body>
</html>